{% block tinect_redirects_list %}
	<sw-page class="tinect-redirects-list">
		<template #smart-bar-actions>
			{% block tinect_redirects_list_smarbar %}
				<sw-button variant="primary" :routerLink="{name: 'tinect.redirects.create'}">
					{{ $t('tinect-redirects.list.createButton') }}
				</sw-button>
			{% endblock %}
		</template>
		<template #smart-bar-header>
            <h2>{{ $tc('tinect-redirects.general.title') }} ({{ total }})</h2>
        </template>
		<template #content>
			{% block tinect_redirects_list_content %}
                <sw-entity-listing
                        v-if="items"
                        :items="items"
                        :repository="redirectRepository"
                        :columns="columns"
                        :sort-by="currentSortBy"
                        :sort-direction="sortDirection"
                        :isLoading="isLoading"
                        :disable-data-fetching="true"
                        :fullPage="isFullPage"
                        detailRoute="tinect.redirect.details"
                        @page-change="onPageChange"
                        @column-sort="onSortColumn"
                >
                    <template #column-active="{ item }">
                        <sw-icon
                                v-if="item.active"
                                name="regular-checkmark-xs"
                                small
                                class="sw-icon--product-status is--active"
                        />

                        <sw-icon
                                v-else
                                name="regular-times-s"
                                small
                                class="sw-icon--product-status is--inactive"
                        />
                    </template>

                    <template #column-source="{ item }">
                        <router-link
                                class="sw-data-grid__cell-value"
                                :to="{ name: 'tinect.redirects.details', params: { id: item.id }, query: { limit, page } }"
                        >
                            <template v-if="item.salesChannelDomain">
                                {{ item.salesChannelDomain.url }}{{ item.source }}
                            </template>
                            <template v-else>
                                {{ item.source }}
                            </template>
                        </router-link>
                    </template>

                    <template #detail-action="{ item }">
                        <sw-context-menu-item class="sw-entity-listing__context-menu-show-action" :routerLink="{ name: 'tinect.redirects.details', params: { id: item.id }, query: { limit, page } }">
                            {{ $tc('sw-customer.list.contextMenuEdit') }}
                        </sw-context-menu-item>
                    </template>
                </sw-entity-listing>
            {% endblock %}
		</template>

        <template #sidebar>
            <sw-sidebar>
                <sw-sidebar-item
                    icon="regular-undo"
                    :title="$tc('tinect-redirects.sidebar.refresh')"
                    @click="onRefresh">
                </sw-sidebar-item>

                <sw-sidebar-item icon="regular-filter"
                                 :title="$tc('tinect-redirects.sidebar.filter')">
                    <sw-text-field :label="$tc('tinect-redirects.sidebar.filters.search')" v-model="filter.term"></sw-text-field>

                    <sw-select-field :label="$t('tinect-redirects.detail.activeLabel')"
                                            v-model="filter.active">
                        <option value=""></option>
                        <option value="1">true</option>
                        <option value="0">false</option>
                    </sw-select-field>

                    <sw-select-number-field :label="$t('tinect-redirects.detail.hiddenLabel')"
                                            v-model="filter.hidden">
                        <option value=1>true</option>
                        <option value=0>false</option>
                    </sw-select-number-field>

                    <sw-entity-single-select
                        v-model="filter.salesChannelDomainId"
                        :label="$tc('tinect-redirects.detail.salesChannelDomain')"
                        entity="sales_channel_domain"
                        labelProperty="url"
                        show-clearable-button
                    ></sw-entity-single-select>

                    <sw-button
                        variant="ghost"
                        @click="resetFilter">
                        {{ $tc('tinect-redirects.sidebar.filters.resetFilter') }}
                    </sw-button>
                </sw-sidebar-item>
            </sw-sidebar>
        </template>
	</sw-page>
{% endblock %}
